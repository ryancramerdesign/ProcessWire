var ProcessLister={form:null,inInit:true,inTimeout:false,lastVal:"",spinner:null,numSubmits:0,results:null,filters:null,lister:null,initialized:false,resetTotal:false,clickAfterRefresh:"",columnSort:function(){$(this).find("span").remove();var a=$(this).find("b").text();var b=$("#lister_sort").val();if(b==a){a="-"+a}if(a.length<1){a=b}$("#lister_sort").val(a);ProcessLister.submit()},init:function(){if(ProcessLister.initialized){return}ProcessLister.initialized=true;ProcessLister.spinner=$("<li class='title' id='ProcessListerSpinner'><i class='fa fa-lg fa-spin fa-spinner'></i></li>");$("#breadcrumbs ul.nav").append(ProcessLister.spinner);ProcessLister.filters=$("#ProcessListerFilters");ProcessLister.results=$("#ProcessListerResults");ProcessLister.lister=$("#ProcessLister");ProcessLister.filters.change(function(){ProcessLister.submit()});ProcessLister.results.on("click","th",ProcessLister.columnSort);$(document).on("click","a.actions_toggle",ProcessLister.pageClick);$("#actions_items_open").attr("disabled","disabled").parent("label").addClass("ui-state-disabled");$(document).on("click",".MarkupPagerNav a",function(){var a=$(this).attr("href");ProcessLister.submit(a);return false});$("#submit_refresh").click(function(){ProcessLister.resetTotal=true;ProcessLister.submit();$(this).fadeOut("normal",function(){$("#submit_refresh").removeClass("ui-state-active").fadeIn()});return false});$("#lister_columns").change(function(){ProcessLister.submit()});$("#ProcessListerActionsForm").find("script").remove();if(ProcessLister.lister.size()>0){ProcessLister.lister.WireTabs({items:$(".WireTab")})}$("#_ProcessListerRefreshTab").html("<i class='fa fa-refresh ui-priority-secondary'></i>").unbind("click").click(function(){ProcessLister.resetTotal=true;ProcessLister.submit();return false});$("#_ProcessListerResetTab").html("<i class='fa fa-rotate-left ui-priority-secondary'></i>").unbind("click").click(function(){window.location.href="./?reset=1";return false});ProcessLister.inInit=false;if(ProcessLister.numSubmits==0){ProcessLister.submit()}else{ProcessLister.spinner.fadeOut()}},submit:function(a){if(ProcessLister.inTimeout){clearTimeout(ProcessLister.inTimeout)}ProcessLister.inTimeout=setTimeout(function(){ProcessLister._submit(a)},250)},_submit:function(b){ProcessLister.numSubmits++;if(typeof b=="undefined"){var b="./"}ProcessLister.spinner.fadeIn("fast");var a={filters:ProcessLister.filters.val(),columns:$("#lister_columns").val(),sort:$("#lister_sort").val()};if(ProcessLister.resetTotal){a.reset_total=1;ProcessLister.resetTotal=false}$.ajax({url:b,type:"POST",data:a,success:function(d){var c=$("#lister_sort").val();ProcessLister.results.html(d).find("th").each(function(){var i=$(this).find("b");var e=i.text();i.remove();$(this).find("span").remove();var f=$(this).find("i");var g=$(this).text();if(e==c){$(this).html("<u>"+g+"</u><span>&nbsp;&darr;</span><b>"+e+"</b>")}else{if(c=="-"+e){$(this).html("<u>"+g+"</u><span>&nbsp;&uarr;</span><b>"+e+"</b>")}else{$(this).html(g+"<b>"+e+"</b>")}}if(f.length>0){$(this).prepend(f)}if(ProcessLister.clickAfterRefresh.length>0){var j=$("#"+ProcessLister.clickAfterRefresh).click();ProcessLister.clickAfterRefresh="";var h=j.closest("tr");h.fadeTo(100,0.1);setTimeout(function(){h.fadeTo(250,1)},250)}}).end().effect("highlight","fast");ProcessLister.spinner.fadeOut();setTimeout(function(){ProcessLister.results.trigger("loaded");$("a.actions_toggle.open").click().removeClass("open")},250)},error:function(c){ProcessLister.results.html("<p>Error retrieving results: "+c+"</p>")}})},pageClick:function(){var b=$(this).closest("tr");var a=$(this).next(".actions");if(b.is(".open")){a.hide();b.removeClass("open")}else{a.css("display","inline-block");b.addClass("open")}return false}};$(document).ready(function(){ProcessLister.init()});