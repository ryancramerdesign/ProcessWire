var ProcessWireAdminTheme={init:function(){var b=$("#head_button > button.dropdown-toggle").hide();this.setupCloneButton();ProcessWireAdmin.init();this.setupSearch();this.setupMobile();var a=$("body");if(a.hasClass("hasWireTabs")&&$("ul.WireTabs").length==0){a.removeClass("hasWireTabs")}$("#content").removeClass("fouc_fix");a.removeClass("pw-init").addClass("pw-ready");if(b.length>0){b.show()}},setupCloneButton:function(){if($("body").is(".modal")){return}var b=$("button.head_button_clone, button.head-button");if(b.length==0){return}var a=$("#head_button");if(a.length==0){a=$("<div id='head_button'></div>").prependTo("#breadcrumbs .container")}b.each(function(){var d=$(this);var c=d.parent("a");if(c.length>0){$button=d.parent("a").clone(true);a.prepend($button)}else{if(d.hasClass("head_button_clone")||d.hasClass("head-button")){$button=d.clone(true);$button.attr("data-from_id",d.attr("id")).attr("id",d.attr("id")+"_copy");$button.click(function(){$("#"+$(this).attr("data-from_id")).click();return false});a.prepend($button)}}if($button.hasClass("dropdown-toggle")&&$button.attr("data-dropdown")){}});a.show()},setupSearch:function(){$.widget("custom.adminsearchautocomplete",$.ui.autocomplete,{_renderMenu:function(e,c){var f=this;var d="";$.each(c,function(g,h){if(h.type!=d){e.append("<li class='ui-widget-header'><a>"+h.type+"</a></li>");d=h.type}e.attr("id","ProcessPageSearchAutocomplete");f._renderItemData(e,h)})},_renderItemData:function(c,d){if(d.label==d.template){d.template=""}c.append("<li><a href='"+d.edit_url+"'>"+d.label+" <small>"+d.template+"</small></a></li>")}});var b=$("#ProcessPageSearchQuery");var a=$("#ProcessPageSearchStatus");b.adminsearchautocomplete({minLength:2,position:{my:"right top",at:"right bottom"},search:function(c,d){a.html("<img src='"+ProcessWire.config.urls.modules+"Process/ProcessPageList/images/loading.gif'>")},open:function(c,d){$("#topnav").hide()},close:function(c,d){$("#topnav").show()},source:function(e,c){var d=b.parents("form").attr("data-action")+"for?get=template_label,title&include=all&admin_search="+e.term;$.getJSON(d,function(g){var f=g.matches.length;if(f<g.total){a.text(g.matches.length+"/"+g.total)}else{a.text(f)}c($.map(g.matches,function(h){return{label:h.title,value:h.title,page_id:h.id,template:h.template_label?h.template_label:"",edit_url:h.editUrl,type:h.type}}))})},select:function(c,d){}}).focus(function(){$(this).siblings("label").find("i").hide()}).blur(function(){a.text("");$(this).siblings("label").find("i").show()})},setupMobile:function(){var a=0;var c=0;var b=function(){var h=$("#topnav");var g=$("body");var e=h.height();if(e>50){if(!g.hasClass("collapse-topnav")){g.addClass("collapse-topnav");a=g.width()}}else{if(a>0){var f=g.width();if(g.hasClass("collapse-topnav")&&f>a){g.removeClass("collapse-topnav");a=0}}}h.children(".collapse-topnav-menu").children("a").click(function(){if($(this).is(".hover")){$(this).mouseleave()}else{$(this).mouseenter()}return false});var d=$(".WireTabs");if(d.length<1){return}d.each(function(){var j=$(this);var i=j.height();if(i>65){if(!g.hasClass("collapse-wiretabs")){g.addClass("collapse-wiretabs");c=g.width()}}else{if(c>0){var k=g.width();if(g.hasClass("collapse-wiretabs")&&k>c){g.removeClass("collapse-wiretabs");c=0}}}})};b();$(window).resize(b)}};$(document).ready(function(){ProcessWireAdminTheme.init();$("#notices a.notice-remove").click(function(){$("#notices").slideUp("fast",function(){$(this).remove()})})});