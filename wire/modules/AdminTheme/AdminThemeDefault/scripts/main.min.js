var ProcessWireAdminTheme={init:function(){var b=$("#head_button > button.dropdown-toggle").hide();this.setupCloneButton();this.setupButtonStates();this.setupTooltips();this.setupSearch();this.setupDropdowns();this.setupMobile();var a=$("body");if(a.hasClass("hasWireTabs")&&$("ul.WireTabs").length==0){a.removeClass("hasWireTabs")}$("#content").removeClass("fouc_fix");a.removeClass("pw-init").addClass("pw-ready");if(b.length>0){b.show()}},setupTooltips:function(){$("a.tooltip").tooltip({position:{my:"center bottom",at:"center top"}}).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})},setupCloneButton:function(){if($("body").is(".modal")){return}var b=$("button.head_button_clone, button.head-button");if(b.length==0){return}var a=$("#head_button");if(a.length==0){a=$("<div id='head_button'></div>").prependTo("#breadcrumbs .container")}b.each(function(){var d=$(this);var c=d.parent("a");if(c.length>0){$button=d.parent("a").clone();a.prepend($button)}else{if(d.hasClass("head_button_clone")||d.hasClass("head-button")){$button=d.clone();$button.attr("data-from_id",d.attr("id")).attr("id",d.attr("id")+"_copy");c=$("<a></a>").attr("href","#");$button.click(function(){$("#"+$(this).attr("data-from_id")).click();return false});a.prepend(c.append($button))}}});a.show()},setupButtonStates:function(){$(".ui-button").hover(function(){$(this).removeClass("ui-state-default").addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover").addClass("ui-state-default")}).click(function(){$(this).removeClass("ui-state-default").addClass("ui-state-active")});$("a > button").click(function(){window.location=$(this).parent("a").attr("href")})},setupSearch:function(){$.widget("custom.adminsearchautocomplete",$.ui.autocomplete,{_renderMenu:function(e,c){var f=this;var d="";$.each(c,function(g,h){if(h.type!=d){e.append("<li class='ui-widget-header'><a>"+h.type+"</a></li>");d=h.type}e.attr("id","ProcessPageSearchAutocomplete");f._renderItemData(e,h)})},_renderItemData:function(c,d){if(d.label==d.template){d.template=""}c.append("<li><a href='"+d.edit_url+"'>"+d.label+" <small>"+d.template+"</small></a></li>")}});var b=$("#ProcessPageSearchQuery");var a=$("#ProcessPageSearchStatus");b.adminsearchautocomplete({minLength:2,position:{my:"right top",at:"right bottom"},search:function(c,d){a.html("<img src='"+config.urls.modules+"Process/ProcessPageList/images/loading.gif'>")},open:function(c,d){$("#topnav").hide()},close:function(c,d){$("#topnav").show()},source:function(e,c){var d=b.parents("form").attr("data-action")+"for?get=template_label,title&include=all&admin_search="+e.term;$.getJSON(d,function(g){var f=g.matches.length;if(f<g.total){a.text(g.matches.length+"/"+g.total)}else{a.text(f)}c($.map(g.matches,function(h){return{label:h.title,value:h.title,page_id:h.id,template:h.template_label?h.template_label:"",edit_url:h.editUrl,type:h.type}}))})},select:function(c,d){}}).focus(function(){$(this).siblings("label").find("i").hide()}).blur(function(){a.text("");$(this).siblings("label").find("i").show()})},dropdownPositionsMonitored:false,setupDropdowns:function(){var a=function(){var d=$(this).attr("data-touchCnt");if(!d){d=0}d++;$(this).attr("data-touchCnt",d);if(d==2){$(this).mouseleave()}else{$(this).mouseenter()}return false};if($("body").hasClass("touch-device")){$("#topnav").on("click","a.dropdown-toggle, a.has-items",a)}$(".dropdown-menu").on("click","a",function(d){d.stopPropagation()});$("ul.dropdown-menu").each(function(){var d=$(this).hide();var f=d.siblings(".dropdown-toggle");if(f.is("button")){f.button()}else{d.css({"border-top-right-radius":0})}d.find("a").click(function(){d.hide();return true});d.find(".has-items").each(function(){var g=$("<i class='has-items-icon fa fa-angle-right ui-priority-secondary'></i>");$(this).prepend(g)});var e=null;f.mouseenter(function(){var j=f.offset();if(e!=null){if(j.top!=e.top||j.left!=e.left){d.menu("destroy").removeClass("dropdown-ready")}}if(!d.hasClass("dropdown-ready")){d.css("position","absolute");d.prependTo($("body")).addClass("dropdown-ready").menu();var h={my:"right top",at:"right bottom",of:f};var i=d.attr("data-my");var g=d.attr("data-at");if(i){h.my=i}if(g){h.at=g}d.position(h).css("z-index",200)}f.addClass("hover");d.show();e=j}).mouseleave(function(){setTimeout(function(){if(d.is(":hover")){return}d.find("ul").hide();d.hide();f.removeClass("hover")},50);if($("body").hasClass("touch-device")){$(this).attr("data-touchCnt",0)}});d.mouseleave(function(){if(f.is(":hover")){return}d.hide();f.removeClass("hover")})});var c=null;function b(f){var d=f.attr("data-from");if(!d){return}var e=$("#"+f.attr("data-from"));if(e.length>0){setTimeout(function(){var i=e.offset().left;var g=f.closest("li").parent("ul");var h=g.offset().left;if(h!=i){g.css("left",i)}},500)}}$(document).on("mouseenter","ul.dropdown-menu a.has-ajax-items:not(.ajax-items-loaded)",function(){var d=$(this);c=d;setTimeout(function(){if(!c||c!=d){return}d.addClass("ajax-items-loaded");var g=d.attr("data-json");var f=d.siblings("ul");var h=false;var e=d.children(".has-items-icon");e.removeClass("fa-angle-right").addClass("fa-spinner fa-spin");$.getJSON(g,function(i){e.removeClass("fa-spinner fa-spin").addClass("fa-angle-right");if(!ProcessWireAdminTheme.dropdownPositionsMonitored&&i.list.length>10){ProcessWireAdminTheme.dropdownPositionsMonitored=true;h=true;$(document).on("hover","ul.dropdown-menu a",function(){b($(this))})}if(i.add){var j=$("<li class='ui-menu-item add'><a href='"+i.url+i.add.url+"'><i class='fa fa-fw fa-plus-circle'></i>"+i.add.label+"</a></li>");f.append(j)}$.each(i.list,function(m){var k="";if(this.icon){k="<i class='ui-priority-secondary fa fa-fw fa-"+this.icon+"'></i>"}var l=$("<li class='ui-menu-item'><a href='"+i.url+this.url+"'>"+k+this.label+"</a></li>");f.append(l)});f.addClass("navJSON").addClass("length"+parseInt(i.list.length));b(d)})},250)}).on("mouseleave","ul.dropdown-menu a.has-ajax-items",function(){c=null})},setupMobile:function(){var a=0;var c=0;var b=function(){var h=$("#topnav");var g=$("body");var e=h.height();if(e>50){if(!g.hasClass("collapse-topnav")){g.addClass("collapse-topnav");a=g.width()}}else{if(a>0){var f=g.width();if(g.hasClass("collapse-topnav")&&f>a){g.removeClass("collapse-topnav");a=0}}}h.children(".collapse-topnav-menu").children("a").click(function(){if($(this).is(".hover")){$(this).mouseleave()}else{$(this).mouseenter()}return false});var d=$(".WireTabs");if(d.length<1){return}d.each(function(){var j=$(this);var i=j.height();if(i>65){if(!g.hasClass("collapse-wiretabs")){g.addClass("collapse-wiretabs");c=g.width()}}else{if(c>0){var k=g.width();if(g.hasClass("collapse-wiretabs")&&k>c){g.removeClass("collapse-wiretabs");c=0}}}})};b();$(window).resize(b)},browserCheck:function(){}};$(document).ready(function(){ProcessWireAdminTheme.init();$("#notices a.notice-remove").click(function(){$("#notices").slideUp("fast",function(){$(this).remove()})})});