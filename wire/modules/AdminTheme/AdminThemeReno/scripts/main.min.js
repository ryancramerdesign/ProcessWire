var ProcessWireAdminTheme={init:function(){this.setupCloneButton();this.setupButtonStates();this.setupTooltips();this.setupSearch();this.setupDropdowns();this.setupSidebarNav();this.setupSpinner();var b=$("body");var a=$("html");if(b.hasClass("hasWireTabs")&&$("ul.WireTabs").length==0){b.removeClass("hasWireTabs")}$("#content").removeClass("fouc_fix");b.removeClass("pw-init").addClass("pw-ready");a.removeClass("pw-init").addClass("pw-ready")},setupSpinner:function(){$(".PageListLoading").append("<i class='fa fa-spinner fa-spin'></i>")},setupSidebarNav:function(){var a=window.location.toString();$(document).mouseup(function(g){var f=$("ul.quicklinks");if(!f.is(g.target)&&f.has(g.target).length===0){f.hide();$(".quicklink-open").removeClass("active");$("#main-nav .current").removeClass("no-arrow")}});function e(){$("#main-nav > li > a.open:not(.hover-temp):not(.just-clicked)").each(function(){var g=$(this);var f=g.next("ul:visible");if(f.length>0){if(f.find(".quicklinks-open").length>0){f.find(".quicklink-close").click()}}})}var c=null,b=0;$("#main-nav a.parent").dblclick(function(f){f.preventDefault()}).click(function(){var f=$(this);f.addClass("just-clicked");b++;if(b===1){c=setTimeout(function(){e();f.toggleClass("open").next("ul").slideToggle("fast",function(){f.removeClass("just-clicked")});b=0},200)}else{clearTimeout(c);b=0;return true}return false});var d=null;$(".quicklink-open").click(function(j){e();var k=$(this);k.parent().addClass("quicklinks-open");k.toggleClass("active").parent().next("ul.quicklinks").toggle();k.parent().parent().siblings().find("ul.quicklinks").hide();k.parent().parent().siblings().find(".quicklink-open").removeClass("active").parent("a").removeClass("quicklinks-open");k.effect("pulsate",100);j.stopPropagation();$("#main-nav .current:not(.open)").addClass("no-arrow");var f=$(this).parent().next("ul.quicklinks");var i=f.attr("data-json");if(i.length>0&&!f.hasClass("json-loaded")){f.addClass("json-loaded");var h=f.find(".quicklinks-spinner");var g=h.attr("class");h.removeClass(g).addClass("fa fa-fw fa-spin fa-spinner");$.getJSON(i,function(l){if(l.add){var m=$("<li class='add'><a href='"+l.url+l.add.url+"'><i class='fa fa-fw fa-plus-circle'></i>"+l.add.label+"</a></li>");f.append(m)}$.each(l.list,function(q){var o="";var p=$("<li><a style='white-space:nowrap' href='"+l.url+this.url+"'>"+o+this.label+"</a></li>");f.append(p)});h.removeClass("fa-spin fa-spinner").addClass(g);if(l.icon.length>0){h.removeClass("fa-bolt").addClass("fa-"+l.icon)}})}return false}).mouseover(function(){var f=$(this);if(f.parent().hasClass("quicklinks-open")){return}f.addClass("hover-temp");clearTimeout(d);d=setTimeout(function(){if(f.parent().hasClass("quicklinks-open")){return}if(f.hasClass("hover-temp")){f.click()}},500)}).mouseout(function(){$(this).removeClass("hover-temp")});$(".quicklink-close").click(function(){$(this).parent().removeClass("quicklinks-open");$(this).closest("ul.quicklinks").hide().prev("a").removeClass("quicklinks-open");$(".quicklink-open").removeClass("active");$("#main-nav .current").removeClass("no-arrow");return false});$("#main-nav .parent").each(function(){var f=$(this).attr("href");if(a.match(f)){$(this).next("ul").show();$(this).addClass("open")}})},setupTooltips:function(){$("a.tooltip").tooltip({position:{my:"center bottom",at:"center top"}}).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})},setupCloneButton:function(){if($("body").is(".modal")){return}var b=$("button.head_button_clone, button.head_button, button.head-button");if(b.length==0){return}var a=$("#head_button");if(a.length==0){a=$("<div id='head_button'></div>").prependTo("#headline").show()}b.each(function(){var d=$(this);var c=d.parent("a");if(c.length>0){$button=d.parent("a").clone();a.prepend($button)}else{if(d.hasClass("head_button_clone")||d.hasClass("head-button")){$button=d.clone();$button.attr("data-from_id",d.attr("id")).attr("id",d.attr("id")+"_copy");c=$("<a></a>").attr("href","#");$button.click(function(){$("#"+$(this).attr("data-from_id")).click();return false});a.prepend(c.append($button))}}});a.show()},setupButtonStates:function(){$(".ui-button").hover(function(){$(this).removeClass("ui-state-default").addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover").addClass("ui-state-default")}).click(function(){$(this).removeClass("ui-state-default").addClass("ui-state-active")});$("a > button").click(function(){window.location=$(this).parent("a").attr("href")})},setupSearch:function(){$.widget("custom.adminsearchautocomplete",$.ui.autocomplete,{_renderMenu:function(e,c){var f=this;var d="";$.each(c,function(g,h){if(h.type!=d){e.append("<li class='ui-widget-header'><a>"+h.type+"</a></li>");d=h.type}e.attr("id","ProcessPageSearchAutocomplete");f._renderItemData(e,h)})},_renderItemData:function(c,d){if(d.label==d.template){d.template=""}c.append("<li><a href='"+d.edit_url+"'>"+d.label+" <small>"+d.template+"</small></a></li>")}});var b=$("#ProcessPageSearchQuery");var a=$("#ProcessPageSearchStatus");b.adminsearchautocomplete({minLength:2,position:{my:"right top",at:"right bottom"},search:function(c,d){a.html("<img src='"+config.urls.modules+"Process/ProcessPageList/images/loading.gif'>")},source:function(e,c){var d=b.parents("form").attr("action")+"for?get=template_label,title&include=all&admin_search="+e.term;$.getJSON(d,function(g){var f=g.matches.length;if(f<g.total){a.text(g.matches.length+"/"+g.total)}else{a.text(f)}c($.map(g.matches,function(h){return{label:h.title,value:h.title,page_id:h.id,template:h.template_label?h.template_label:"",edit_url:h.editUrl,type:h.type}}))})},select:function(c,d){}}).blur(function(){a.text("")})},setupDropdowns:function(){$("ul.dropdown-menu").each(function(){var a=$(this).hide();var c=a.siblings(".dropdown-toggle");if(c.is("button")){c.button()}else{a.css({"border-top-right-radius":0})}a.find("a").click(function(){a.hide();return true});var b=null;c.mouseenter(function(){var g=c.offset();if(b!=null){if(g.top!=b.top||g.left!=b.left){a.menu("destroy").removeClass("dropdown-ready")}}if(!a.hasClass("dropdown-ready")){a.css("position","absolute");a.prependTo($("body")).addClass("dropdown-ready").menu();var e={my:"right top",at:"right bottom",of:c};var f=a.attr("data-my");var d=a.attr("data-at");if(f){e.my=f}if(d){e.at=d}a.position(e).css("z-index",9999)}c.addClass("hover");a.show();b=g}).mouseleave(function(){setTimeout(function(){if(a.is(":hover")){return}a.hide();c.removeClass("hover")},0)});a.mouseleave(function(){if(c.is(":hover")){return}a.hide();c.removeClass("hover")})})}};$(document).ready(function(){ProcessWireAdminTheme.init();$("#notices a.notice-remove").click(function(){$("#notices").slideUp("fast",function(){$(this).remove()})});$(".main-nav-toggle").click(function(){$(this).add("#sidebar, #main").toggleClass("toggle");return false})});