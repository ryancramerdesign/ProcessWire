function CommentFormSetCookie(c,d,e){var b=new Date();var a=new Date();if(e==null||e==0){e=1}a.setTime(b.getTime()+3600000*24*e);document.cookie=c+"="+escape(d)+";path=/;expires="+a.toGMTString()}function CommentFormGetCookie(b){var c=new RegExp("[; ]"+b+"=([^\\s;]*)");var a=(" "+document.cookie).match(c);if(b&&a){return unescape(a[1])}return""}jQuery(document).ready(function(c){c(".CommentActionReply").click(function(){var g=c(this);var f=g.parent().next("form");if(f.length==0){f=c("#CommentForm form").clone().removeAttr("id");f.hide().find(".CommentFormParent").val(c(this).attr("data-comment-id"));c(this).parent().after(f);f.slideDown()}else{if(!f.is(":visible")){f.slideDown()}else{f.slideUp()}}return false});c(".CommentFormSubmit button").on("click",function(){var l=c(this);var n=l.closest("form.CommentForm");var h=n.find(".CommentFormCite input").val();var k=n.find(".CommentFormEmail input").val();var j=n.find(".CommentFormWebsite input");var f=j.length>0?j.val():"";var i=n.find(".CommentFormNotify :input");var m=i.length>0?i.val():"";if(h.indexOf("|")>-1){h=""}if(k.indexOf("|")>-1){k=""}if(f.indexOf("|")>-1){f=""}var g=h+"|"+k+"|"+f+"|"+m;CommentFormSetCookie("CommentForm",g,30)});var e=CommentFormGetCookie("CommentForm");if(e.length>0){var b=e.split("|");var a=c("form.CommentForm");a.find(".CommentFormCite input").val(b[0]);a.find(".CommentFormEmail input").val(b[1]);a.find(".CommentFormWebsite input").val(b[2]);a.find(".CommentFormNotify :input").val(b[3])}var d=false;c(".CommentActionUpvote, .CommentActionDownvote").on("click",function(){if(d){return false}d=true;var f=c(this);c.getJSON(f.attr("data-url"),function(h){if("success" in h){if(h.success){var g=f.closest(".CommentVotes");g.find(".CommentUpvoteCnt").text(h.upvotes);g.find(".CommentDownvoteCnt").text(h.downvotes);f.addClass("CommentVoted")}else{if(h.message.length){alert(h.message)}}}else{d=false;return true}d=false});return false})});