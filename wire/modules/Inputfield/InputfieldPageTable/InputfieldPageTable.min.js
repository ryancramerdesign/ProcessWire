function InputfieldPageTableDialog(){var c=$(this);var a=c.attr("data-url");var h=c.attr("data-title");var e=true;var j=$(this).parents(".InputfieldPageTableContainer");var f=0;var g=parseInt(j.attr("data-noclose"));var b={close:function(l,n){if(f>0){var m=j.attr("data-url")+"&InputfieldPageTableAdd="+f;var k=j.siblings(".InputfieldPageTableSort").val();if(typeof k!="undefined"&&k.length){m+="&InputfieldPageTableSort="+k.replace(/\|/g,",")}$.get(m,function(o){j.html(o);j.find(".Inputfield").trigger("reloaded",["InputfieldPageTable"]);j.effect("highlight",500,function(){var q=j.find("table");q.find("tbody").css("overflow","visible");InputfieldPageTableSortable(q);var p=j.siblings("input.InputfieldPageTableDelete").eq(0).val().split("|");if(p.length){for(var s=0;s<p.length;s++){var r=p[s];q.find("tr[data-id="+r+"]").addClass("InputfieldPageTableDelete ui-state-error-text ui-state-disabled")}}})})}}};var i=pwModalWindow(a,b,"large");var d=false;if(c.is(".InputfieldPageTableAdd")){e=false}i.load(function(){var l=[];var m=i.contents();var o=0;f=m.find("#Inputfield_id").val();m.find("#wrap_Inputfield_template, #wrap_template, #wrap_parent_id").hide();m.find("#_ProcessPageEditDelete, #_ProcessPageEditChildren").hide();e=g==0&&m.find("#ProcessPageAdd").length==0;if(e&&d){if(m.find(".NoticeError, .NoticeWarning, .ui-state-error").length==0){if(typeof Notifications!="undefined"){var k=[];m.find(".NoticeMessage").each(function(){k[k.length]=$(this).text()});if(k.length>0){setTimeout(function(){for(var n=0;n<k.length;n++){Notifications.message(k[n])}},500)}}i.dialog("close");return}else{}}m.find("#content form button.ui-button[type=submit]").each(function(){var q=$(this);var r=q.text();var p=false;for(var n=0;n<l.length;n++){if(l[n].text==r||r.length<1){p=true}}if(!p){l[o]={text:r,"class":(q.is(".ui-priority-secondary")?"ui-priority-secondary":""),click:function(){q.click();if(e){d=true}if(!g){e=true}}};o++}q.hide()});i.setButtons(l)});return false}function InputfieldPageTableUpdate(a){var b="";if(!a.is("tbody")){a=a.find("tbody")}a.find("tr").each(function(){var e=$(this).attr("data-id");if(b.length>0){b+="|"}b+=e});var c=a.parents(".InputfieldPageTableContainer");var d=c.siblings(".InputfieldPageTableSort");d.val(b)}function InputfieldPageTableSortable(a){a.find("tbody").sortable({axis:"y",start:function(c,d){var b=[];var e=0;a.find("thead").find("th").each(function(){b[e]=$(this).width();e++});e=0;d.helper.find("td").each(function(){$(this).attr("width",b[e]);e++})},stop:function(b,c){InputfieldPageTableUpdate($(this))}})}function InputfieldPageTableDelete(){var a=$(this).closest("tr");a.toggleClass("InputfieldPageTableDelete ui-state-error-text ui-state-disabled");var b="";a.parents("tbody").children("tr").each(function(){var d=$(this);var e=d.attr("data-id");if(d.is(".InputfieldPageTableDelete")){b+=(b.length>0?"|":"")+e}});var c=$(this).parents(".InputfieldPageTableContainer").siblings("input.InputfieldPageTableDelete");c.val(b);return false}$(document).ready(function(){$(document).on("click",".InputfieldPageTableAdd, .InputfieldPageTableEdit",InputfieldPageTableDialog);$(document).on("click","a.InputfieldPageTableDelete",InputfieldPageTableDelete);$(document).on("dblclick",".InputfieldPageTable .AdminDataTable td",function(){$(this).closest("tr").find(".InputfieldPageTableEdit").click()});InputfieldPageTableSortable($(".InputfieldPageTable table"));$(document).on("reloaded",".InputfieldPageTable",function(){InputfieldPageTableSortable($(this).find(".InputfieldPageTableContainer > table"))});$(document).on("click",".InputfieldPageTableOrphansAll",function(){var a=$(this).closest(".InputfieldPageTableOrphans").find("input");if(a.eq(0).is(":checked")){a.removeAttr("checked")}else{a.attr("checked","checked")}return false})});