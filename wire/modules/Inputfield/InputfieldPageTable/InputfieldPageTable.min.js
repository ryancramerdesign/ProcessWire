function InputfieldPageTableDialog(){var c=$(this);var a=c.attr("data-url");var g=c.attr("data-title");var d=true;var j=$(this).parents(".InputfieldPageTableContainer");var e=0;var f=parseInt(j.attr("data-noclose"));var b={close:function(l,n){if(e>0){var m=j.attr("data-url")+"&InputfieldPageTableAdd="+e;var k=j.siblings(".InputfieldPageTableSort").val();if(k.length){m+="&InputfieldPageTableSort="+k.replace(/\|/g,",")}$.get(m,function(o){j.html(o);j.effect("highlight",500);InputfieldPageTableSortable(j.find("table"))})}}};var h=pwModalWindow(a,b,"medium");if(c.is(".InputfieldPageTableAdd")){d=false}h.load(function(){var k=[];var l=h.contents();var m=0;e=l.find("#Inputfield_id").val();l.find("#wrap_Inputfield_template, #wrap_template, #wrap_parent_id").hide();l.find("#_ProcessPageEditDelete, #_ProcessPageEditChildren").hide();d=f==0&&l.find("#ProcessPageAdd").size()==0;l.find("#content form button.ui-button[type=submit]").each(function(){var o=$(this);var p=o.text();var n=false;for(i=0;i<k.length;i++){if(k[i].text==p||p.length<1){n=true}}if(!n){k[m]={text:p,"class":(o.is(".ui-priority-secondary")?"ui-priority-secondary":""),click:function(){o.click();if(d){setTimeout(function(){h.dialog("close")},500)}if(!f){d=true}}};m++}o.hide()});h.setButtons(k)});return false}function InputfieldPageTableUpdate(a){var b="";if(!a.is("tbody")){a=a.find("tbody")}a.find("tr").each(function(){var e=$(this).attr("data-id");if(b.length>0){b+="|"}b+=e});var c=a.parents(".InputfieldPageTableContainer");var d=c.siblings(".InputfieldPageTableSort");d.val(b)}function InputfieldPageTableSortable(a){a.find("tbody").sortable({axis:"y",start:function(b,c){},stop:function(b,c){InputfieldPageTableUpdate($(this))}})}function InputfieldPageTableDelete(){var a=$(this).parents("tr");a.toggleClass("InputfieldPageTableDelete ui-state-error-text ui-state-disabled");var b="";a.parents("tbody").children("tr").each(function(){var d=$(this);var e=d.attr("data-id");if(d.is(".InputfieldPageTableDelete")){b+=(b.length>0?"|":"")+e}});var c=$(this).parents(".InputfieldPageTableContainer").siblings("input.InputfieldPageTableDelete");c.val(b);return false}$(document).ready(function(){$(document).on("click",".InputfieldPageTableAdd, .InputfieldPageTableEdit",InputfieldPageTableDialog);$(document).on("click","a.InputfieldPageTableDelete",InputfieldPageTableDelete);$(document).on("dblclick",".InputfieldPageTable .AdminDataTable td",function(){$(this).closest("tr").find(".InputfieldPageTableEdit").click()});InputfieldPageTableSortable($(".InputfieldPageTable table"));$(".InputfieldPageTableOrphansAll").click(function(){var a=$(this).closest(".InputfieldPageTableOrphans").find("input");if(a.eq(0).is(":checked")){a.removeAttr("checked")}else{a.attr("checked","checked")}return false})});