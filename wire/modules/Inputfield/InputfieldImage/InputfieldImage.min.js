$(document).ready(function(){var f={type:"image",closeOnContentClick:true,closeBtnInside:true,image:{titleSrc:"title"},callbacks:{open:function(){if($(".InputfieldFileJustSorted").size()>0){this.close()}}}};function a(g){if(g.find(".InputfieldImageListToggle").length){return}var h=$("<a class='InputfieldImageListToggle HideIfEmpty' href='#'></a>").append("<i class='fa fa-th'></i>");if(g.hasClass("InputfieldImage")){g.find(".InputfieldHeader").append(h)}else{$(".InputfieldImage .InputfieldHeader",g).append(h)}}$(document).on("reloaded",".InputfieldImage",function(){var g=$(this);a(g);if(g.find(".InputfieldImageDefaultGrid").length){b(g);d(g)}});$(document).on("click",".InputfieldImage .InputfieldFileLink",function(){var h=$(this);var g=f;g.items={src:h.attr("href"),title:typeof(h.attr("data-info"))!="undefined"?h.attr("data-info"):h.children("img").attr("alt")};$.magnificPopup.open(g,0);return false});$(document).on("click",".InputfieldImage .InputfieldFileMove",function(){var h=$(this).parent("p").parent("li");var g=h.parent();if($(this).is(".InputfieldFileMoveTop")){g.prepend(h)}else{g.append(h)}g.children("li").each(function(i){$(this).find(".InputfieldFileSort").val(i)});return false});function e(i){var h=i.children("img");var g=h.attr("data-gridsize");i.css("background","#000 url("+h.attr("src")+") center center no-repeat");i.css("width",g+"px").css("height",g+"px");h.css("height",g+"px");if(h.width()>(g-1)&&h.height()>(g-1)){i.css("background-size","cover")}}function d(g){g.find("i.fa-th").replaceWith($("<i class='fa fa-list'></i>"));g.find(".InputfieldFileLink").each(function(){e($(this))});g.addClass("InputfieldImageGrid")}function c(g){g.css({background:"none",width:"",height:""}).find("img").css("height","")}function b(g){g.removeClass("InputfieldImageGrid");g.find(".InputfieldFileLink").each(function(){c($(this))});g.find("i.fa-list").replaceWith($("<i class='fa fa-th'></i>"))}a($(".InputfieldForm"));$(document).on("click",".InputfieldImageListToggle",function(){var g=$(this).parents(".InputfieldImage");if(g.hasClass("InputfieldImageGrid")){b(g)}else{d(g)}return false});$(".InputfieldImage").find(".InputfieldImageDefaultGrid").each(function(){d($(this).parents(".InputfieldImage"))});$(document).on("AjaxUploadDone",".InputfieldImage .InputfieldFileList",function(){$("a.InputfieldFileLink",$(this)).magnificPopup(f);var g=$(this).parents(".InputfieldImage");if(g.is(".InputfieldImageGrid")){b(g);d(g)}})});