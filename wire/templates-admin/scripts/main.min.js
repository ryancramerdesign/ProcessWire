var ProcessWireAdminTheme={init:function(){this.setupCloneButton();this.setupButtonStates();this.setupTooltips();this.setupSearch();this.sizeTitle();$("#content").removeClass("fouc_fix")},setupTooltips:function(){$("a.tooltip").tooltip({position:{my:"center bottom-20",at:"center top",using:function(a,b){$(this).css(a);$("<div>").addClass("arrow").addClass(b.vertical).addClass(b.horizontal).appendTo(this)}}}).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})},setupCloneButton:function(){var b=$("#content a:not([id]) button:not([id]), #content button.head_button_clone[id!=]");if(b.size()==0){return}var a=$("<div id='head_button'></div>").appendTo("#masthead .container").show();b.each(function(){var d=$(this);var c=d.parent("a");if(c.size()){$button=d.parent("a").clone();a.append($button)}else{if(d.is(".head_button_clone")){$button=d.clone();$button.attr("data-from_id",d.attr("id")).attr("id",d.attr("id")+"_copy");c=$("<a></a>").attr("href","#");$button.click(function(){$("#"+$(this).attr("data-from_id")).click();return false});a.append(c.append($button))}}})},setupButtonStates:function(){$(".ui-button").hover(function(){$(this).removeClass("ui-state-default").addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover").addClass("ui-state-default")}).click(function(){$(this).removeClass("ui-state-default").addClass("ui-state-active").effect("highlight",{},500)});$("a > button").click(function(){window.location=$(this).parent("a").attr("href")})},sizeTitle:function(){var c=$("#title");if(c.size()==0||c.text().length<35){return}var a=c.css("font-size");var d=parseInt(a);var b=function(){var f=0;var e=$("#head_button button");if(e.size()>0){f=e.width()+20}maxTitleWidth=c.parent().width()-f;c.css({whiteSpace:"nowrap",marginTop:"0",paddingRight:"0"});while(c.width()>maxTitleWidth){if(--d<22){c.css({marginTop:"-0.75em",whiteSpace:"normal",paddingRight:f+"px"});break}c.css("font-size",d+"px")}};$(window).resize(function(){c.css("font-size",a);d=parseInt(a);b()});b()},setupSearch:function(){$.widget("custom.adminsearchautocomplete",$.ui.autocomplete,{_renderMenu:function(e,c){var f=this;var d="";$.each(c,function(g,h){if(h.type!=d){e.append("<li class='ui-widget-header'><a>"+h.type+"</a></li>");d=h.type}e.attr("id","ProcessPageSearchAutocomplete");f._renderItemData(e,h)})},_renderItemData:function(c,d){if(d.label==d.template){d.template=""}c.append("<li><a href='"+d.edit_url+"'>"+d.label+" <small>"+d.template+"</small></a></li>")}});var b=$("#ProcessPageSearchQuery");var a=$("#ProcessPageSearchStatus");b.adminsearchautocomplete({minLength:2,position:{my:"right top",at:"right bottom"},search:function(c,d){a.html("<img src='"+config.urls.modules+"Process/ProcessPageList/images/loading.gif'>")},source:function(e,c){var d=b.parents("form").attr("action")+"for?get=template_label,title&include=all&admin_search="+e.term;$.getJSON(d,function(g){var f=g.matches.length;if(f<g.total){a.text(g.matches.length+"/"+g.total)}else{a.text(f)}c($.map(g.matches,function(h){return{label:h.title,value:h.title,page_id:h.id,template:h.template_label?h.template_label:"",edit_url:h.editUrl,type:h.type}}))})},select:function(c,d){}}).blur(function(){a.text("")})}};$(document).ready(function(){ProcessWireAdminTheme.init()});